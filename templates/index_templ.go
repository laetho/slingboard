// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.865
package templates

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

func BoardCard(name string) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<a href=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var2 templ.SafeURL = templ.SafeURL("/board/" + name + "/")
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(string(templ_7745c5c3_Var2)))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "\" data-board-name=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var3 string
		templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(name)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/index.templ`, Line: 5, Col: 27}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "\" class=\"group rounded-2xl border border-slate-800/70 bg-slate-900/60 p-6 transition hover:-translate-y-1 hover:border-slate-600/70 hover:bg-slate-900/80\"><div class=\"flex items-start justify-between\"><div><p class=\"text-xs uppercase tracking-[0.2em] text-slate-500\">slingBoard</p><h3 class=\"mt-2 text-xl font-semibold text-slate-100\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var4 string
		templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(name)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/index.templ`, Line: 10, Col: 68}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "</h3></div><span class=\"rounded-full border border-slate-700/60 bg-slate-800/60 px-3 py-1 text-xs uppercase tracking-[0.2em] text-slate-300\">View</span></div><p class=\"mt-4 text-sm text-slate-400\">Open the live stream for this slingBoard.</p></a>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func BoardsIndex(boardCards string) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var5 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var5 == nil {
			templ_7745c5c3_Var5 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "<!doctype html><html lang=\"en\"><head><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>SlingBoard boards</title><link rel=\"stylesheet\" href=\"/static/style.css\"><script src=\"https://cdn.tailwindcss.com\"></script><script type=\"module\" src=\"https://cdn.jsdelivr.net/gh/starfederation/datastar@1.0.0-RC.7/bundles/datastar.js\"></script></head><body class=\"min-h-screen bg-slate-950 text-slate-100 hero-gradient\"><header class=\"border-b border-slate-800/70 bg-slate-950/70 backdrop-blur-xl\"><div class=\"mx-auto flex max-w-6xl flex-wrap items-center justify-between gap-6 px-6 py-6\"><div><p class=\"text-sm uppercase tracking-[0.2em] text-slate-400\">SlingBoard</p><h1 class=\"mt-2 text-3xl font-semibold\">slingBoards</h1><p class=\"mt-2 max-w-xl text-sm text-slate-400\">Search existing slingBoards or create a new one to start slinging.</p></div><div class=\"flex w-full flex-col gap-3 sm:w-auto sm:min-w-[280px]\"><label class=\"text-xs uppercase tracking-[0.2em] text-slate-500\">Search slingBoards</label> <input id=\"board-search\" type=\"search\" placeholder=\"Search\" class=\"rounded-xl border border-slate-700/70 bg-slate-900/70 px-4 py-3 text-sm text-slate-200 placeholder:text-slate-600 focus:border-slate-500 focus:outline-none\"></div></div></header><main class=\"mx-auto max-w-6xl px-6 py-10\"><section class=\"rounded-3xl border border-slate-800/70 bg-slate-900/40 p-6 shadow-2xl\"><div class=\"flex flex-wrap items-center justify-between gap-6\"><div><h2 class=\"text-xl font-semibold\">Create a slingBoard</h2><p class=\"mt-1 text-sm text-slate-400\">slingBoard names are URI compatible and lower-case.</p></div><div class=\"flex w-full flex-col gap-3 sm:w-auto sm:flex-row\"><input id=\"board-create\" type=\"text\" placeholder=\"new-board\" class=\"flex-1 rounded-xl border border-slate-700/70 bg-slate-900/70 px-4 py-3 text-sm text-slate-200 placeholder:text-slate-600 focus:border-slate-500 focus:outline-none\"> <button id=\"board-create-btn\" class=\"rounded-xl bg-slate-200 px-5 py-3 text-sm font-semibold text-slate-900 transition hover:bg-white\">Create</button></div></div></section><section class=\"mt-10\"><div class=\"flex items-center justify-between\"><h2 class=\"text-xl font-semibold\">Available slingBoards</h2><span class=\"text-xs uppercase tracking-[0.2em] text-slate-500\" id=\"board-count\"></span></div><div id=\"board-empty\" class=\"mt-6 rounded-2xl border border-dashed border-slate-800/70 bg-slate-900/40 p-10 text-center text-sm text-slate-400\">Waiting for slings...</div><div id=\"board-list\" class=\"board-grid mt-6\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templ.Raw(boardCards).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "</div></section></main><script>\n    const boardList = document.getElementById(\"board-list\");\n    const boardEmpty = document.getElementById(\"board-empty\");\n    const boardSearch = document.getElementById(\"board-search\");\n    const boardCreate = document.getElementById(\"board-create\");\n    const boardCreateBtn = document.getElementById(\"board-create-btn\");\n    const boardCount = document.getElementById(\"board-count\");\n\n    const normalizeBoardName = (value) => {\n      const lowered = value.trim().toLowerCase();\n      let output = \"\";\n      let lastDash = false;\n      for (const ch of lowered) {\n        if ((ch >= \"a\" && ch <= \"z\") || (ch >= \"0\" && ch <= \"9\") || ch === \"-\" || ch === \"_\") {\n          output += ch;\n          lastDash = false;\n        } else if (!lastDash) {\n          output += \"-\";\n          lastDash = true;\n        }\n      }\n      return output.replace(/^-+|-+$/g, \"\");\n    };\n\n    const updateEmptyState = () => {\n      const visibleCards = boardList.querySelectorAll(\"[data-board-name]:not(.hidden)\").length;\n      boardEmpty.classList.toggle(\"hidden\", visibleCards > 0);\n      boardCount.textContent = visibleCards > 0 ? visibleCards + \" slingBoards\" : \"\";\n    };\n\n    const filterBoards = () => {\n      const query = normalizeBoardName(boardSearch.value || \"\");\n      boardList.querySelectorAll(\"[data-board-name]\").forEach((card) => {\n        const match = card.dataset.boardName.includes(query);\n        card.classList.toggle(\"hidden\", !match);\n      });\n      updateEmptyState();\n    };\n\n    const createBoard = () => {\n      const name = normalizeBoardName(boardCreate.value || \"\");\n      if (!name) {\n        return;\n      }\n\n      const existing = boardList.querySelector('[data-board-name=\"' + name + '\"]');\n      if (!existing) {\n        const card = document.createElement(\"a\");\n        card.href = \"/board/\" + name + \"/\";\n        card.dataset.boardName = name;\n        card.className = \"group rounded-2xl border border-slate-800/70 bg-slate-900/60 p-6 transition hover:-translate-y-1 hover:border-slate-600/70 hover:bg-slate-900/80\";\n        card.innerHTML =\n          '<div class=\"flex items-start justify-between\">' +\n          '<div>' +\n          '<p class=\"text-xs uppercase tracking-[0.2em] text-slate-500\">slingBoard</p>' +\n          '<h3 class=\"mt-2 text-xl font-semibold text-slate-100\">' + name + '</h3>' +\n          '</div>' +\n          '<span class=\"rounded-full border border-slate-700/60 bg-slate-800/60 px-3 py-1 text-xs uppercase tracking-[0.2em] text-slate-300\">View</span>' +\n          '</div>' +\n          '<p class=\"mt-4 text-sm text-slate-400\">Open the live stream for this slingBoard.</p>';\n        boardList.prepend(card);\n        updateEmptyState();\n      }\n\n      window.location.href = \"/board/\" + name + \"/\";\n    };\n\n    boardSearch?.addEventListener(\"input\", filterBoards);\n    boardCreateBtn?.addEventListener(\"click\", createBoard);\n    boardCreate?.addEventListener(\"keydown\", (event) => {\n      if (event.key === \"Enter\") {\n        event.preventDefault();\n        createBoard();\n      }\n    });\n\n    updateEmptyState();\n  </script></body></html>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func BoardView(board string) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var6 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var6 == nil {
			templ_7745c5c3_Var6 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, "<!doctype html><html lang=\"en\"><head><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>SlingBoard · ")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var7 string
		templ_7745c5c3_Var7, templ_7745c5c3_Err = templ.JoinStringErrs(board)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/index.templ`, Line: 162, Col: 30}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var7))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, "</title><link rel=\"stylesheet\" href=\"/static/style.css\"><script src=\"https://cdn.tailwindcss.com\"></script><script type=\"module\" src=\"https://cdn.jsdelivr.net/gh/starfederation/datastar@1.0.0-RC.7/bundles/datastar.js\"></script></head><body class=\"h-screen bg-slate-950 text-slate-100 hero-gradient\"><header class=\"fixed top-0 left-0 w-full z-10 border-b border-slate-800/70 bg-slate-950/70 backdrop-blur-xl\"><div class=\"mx-auto flex max-w-6xl items-center justify-between px-6 py-4\"><div><p class=\"text-sm uppercase tracking-[0.2em] text-slate-400\"><a href=\"/\" class=\"hover:text-slate-200\">slingBoard</a></p><h1 class=\"text-2xl font-semibold\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var8 string
		templ_7745c5c3_Var8, templ_7745c5c3_Err = templ.JoinStringErrs(board)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/index.templ`, Line: 172, Col: 50}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var8))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 9, "</h1></div><div class=\"flex items-center gap-3\"><a href=\"/\" class=\"rounded-full border border-slate-700/60 bg-slate-900/80 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-slate-300\">All slingBoards</a> <button id=\"grid-toggle\" class=\"rounded-full border border-slate-700/60 bg-slate-900/80 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-slate-300\">Grid view</button></div></div></header><div id=\"slingboard\" class=\"scroll-container\" data-board-name=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var9 string
		templ_7745c5c3_Var9, templ_7745c5c3_Err = templ.JoinStringErrs(board)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/index.templ`, Line: 181, Col: 71}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var9))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 10, "\"><div id=\"slings\"><div class=\"sling text-white\" id=\"sling-placeholder\"><div class=\"sling-card text-2xl font-semibold text-center\">Waiting for slings...</div></div></div></div><button id=\"add-sling\" class=\"floating-action\" aria-label=\"Add sling\" type=\"button\">+</button><div id=\"add-sling-modal\" class=\"modal\" aria-hidden=\"true\"><div class=\"modal__backdrop\" data-modal-close></div><div class=\"modal__card\" role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"add-sling-title\"><div class=\"modal__header\"><div><p class=\"text-xs uppercase tracking-[0.2em] text-slate-400\">slingBoard</p><h2 id=\"add-sling-title\" class=\"text-2xl font-semibold\">Add sling</h2></div><button type=\"button\" class=\"modal__close\" data-modal-close aria-label=\"Close\">×</button></div><div class=\"modal__tabs\" role=\"tablist\"><button class=\"modal__tab is-active\" type=\"button\" data-tab=\"text\">Message</button> <button class=\"modal__tab\" type=\"button\" data-tab=\"url\">URL</button> <button class=\"modal__tab\" type=\"button\" data-tab=\"file\">File</button></div><form id=\"add-sling-form\" class=\"modal__body\"><div class=\"modal__panel\" data-panel=\"text\"><label class=\"modal__label\">Message</label> <textarea id=\"sling-message\" rows=\"5\" placeholder=\"Write a message\" class=\"modal__input\"></textarea></div><div class=\"modal__panel hidden\" data-panel=\"url\"><label class=\"modal__label\">URL</label> <input id=\"sling-url\" type=\"url\" placeholder=\"https://\" class=\"modal__input\"></div><div class=\"modal__panel hidden\" data-panel=\"file\"><label class=\"modal__label\">File</label> <input id=\"sling-file\" type=\"file\" class=\"modal__input\"></div><p id=\"sling-status\" class=\"modal__status\"></p><div class=\"modal__actions\"><button type=\"button\" class=\"btn-secondary\" data-modal-close>Cancel</button> <button type=\"submit\" class=\"btn-primary\">Send sling</button></div></form></div></div><script type=\"module\">\n    window.addEventListener(\"DOMContentLoaded\", () => {\n      const container = document.querySelector(\".scroll-container\");\n      const slings = document.getElementById(\"slings\");\n      const gridToggle = document.getElementById(\"grid-toggle\");\n      const addButton = document.getElementById(\"add-sling\");\n      const modal = document.getElementById(\"add-sling-modal\");\n      const modalClose = modal?.querySelectorAll(\"[data-modal-close]\") || [];\n      const tabs = modal?.querySelectorAll(\"[data-tab]\") || [];\n      const panels = modal?.querySelectorAll(\"[data-panel]\") || [];\n      const form = document.getElementById(\"add-sling-form\");\n      const status = document.getElementById(\"sling-status\");\n      const messageInput = document.getElementById(\"sling-message\");\n      const urlInput = document.getElementById(\"sling-url\");\n      const fileInput = document.getElementById(\"sling-file\");\n      let activeTab = \"text\";\n\n      if (!container || !slings) {\n        return;\n      }\n\n      let isUserScrolling = false;\n      let lastScrollPosition = container.scrollTop;\n      let isGridMode = false;\n\n      const setGridMode = (enabled) => {\n        isGridMode = enabled;\n        container.classList.toggle(\"grid-mode\", enabled);\n        slings.classList.toggle(\"grid-mode\", enabled);\n        gridToggle.textContent = enabled ? \"Scroll view\" : \"Grid view\";\n      };\n\n      const trimSlings = () => {\n        const items = slings.querySelectorAll(\".sling\");\n        if (items.length <= 20) {\n          return;\n        }\n        for (let i = items.length - 1; i >= 20; i -= 1) {\n          items[i].remove();\n        }\n      };\n\n      container.addEventListener(\"scroll\", () => {\n        isUserScrolling = Math.abs(container.scrollTop - lastScrollPosition) > 10;\n        lastScrollPosition = container.scrollTop;\n      });\n\n      gridToggle?.addEventListener(\"click\", () => {\n        setGridMode(!isGridMode);\n      });\n\n      slings.addEventListener(\"click\", (event) => {\n        if (!isGridMode) {\n          return;\n        }\n        const target = event.target.closest(\"[data-sling-id]\");\n        if (!target) {\n          return;\n        }\n        setGridMode(false);\n        target.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n      });\n\n      const protocol = window.location.protocol === \"https:\" ? \"wss\" : \"ws\";\n      const ws = new WebSocket(protocol + \"://\" + window.location.host + window.location.pathname);\n\n      const setStatus = (text, isError = false) => {\n        if (!status) {\n          return;\n        }\n        status.textContent = text;\n        status.classList.toggle(\"is-error\", isError);\n      };\n\n      const openModal = () => {\n        modal?.classList.add(\"is-open\");\n        modal?.setAttribute(\"aria-hidden\", \"false\");\n        setStatus(\"\");\n      };\n\n      const closeModal = () => {\n        modal?.classList.remove(\"is-open\");\n        modal?.setAttribute(\"aria-hidden\", \"true\");\n        setStatus(\"\");\n        if (messageInput) messageInput.value = \"\";\n        if (urlInput) urlInput.value = \"\";\n        if (fileInput) fileInput.value = \"\";\n      };\n\n      const setActiveTab = (name) => {\n        activeTab = name;\n        tabs.forEach((tab) => tab.classList.toggle(\"is-active\", tab.dataset.tab === name));\n        panels.forEach((panel) => panel.classList.toggle(\"hidden\", panel.dataset.panel !== name));\n      };\n\n      const readFileAsBase64 = (file) =>\n        new Promise((resolve, reject) => {\n          const reader = new FileReader();\n          reader.onload = () => {\n            const result = String(reader.result || \"\");\n            const commaIndex = result.indexOf(\",\");\n            if (commaIndex === -1) {\n              reject(new Error(\"Invalid file encoding\"));\n              return;\n            }\n            resolve(result.slice(commaIndex + 1));\n          };\n          reader.onerror = () => reject(new Error(\"Failed to read file\"));\n          reader.readAsDataURL(file);\n        });\n\n      const submitSling = async (event) => {\n        event.preventDefault();\n        const board = container.dataset.boardName || \"\";\n        if (!board) {\n          setStatus(\"Missing board name\", true);\n          return;\n        }\n\n        let payload = { type: activeTab, board: board, content: \"\" };\n\n        try {\n          if (activeTab === \"text\") {\n            const value = messageInput?.value.trim() || \"\";\n            if (!value) {\n              setStatus(\"Message is required\", true);\n              return;\n            }\n            payload.content = value;\n          } else if (activeTab === \"url\") {\n            const value = urlInput?.value.trim() || \"\";\n            if (!value) {\n              setStatus(\"URL is required\", true);\n              return;\n            }\n            payload.content = value;\n          } else if (activeTab === \"file\") {\n            const file = fileInput?.files?.[0];\n            if (!file) {\n              setStatus(\"File is required\", true);\n              return;\n            }\n            const encoded = await readFileAsBase64(file);\n            payload = {\n              type: \"file\",\n              board: board,\n              content: encoded,\n              filename: file.name,\n              mime_type: file.type || \"application/octet-stream\",\n            };\n          }\n\n          setStatus(\"Sending...\");\n\n          const response = await fetch(\"/api/commands\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\", Accept: \"application/json\" },\n            body: JSON.stringify(payload),\n          });\n\n          const data = await response.json().catch(() => ({}));\n          if (!response.ok || data.status === \"error\") {\n            throw new Error(data.message || \"Failed to send sling\");\n          }\n\n          closeModal();\n        } catch (error) {\n          setStatus(error.message || \"Failed to send sling\", true);\n        }\n      };\n\n      addButton?.addEventListener(\"click\", openModal);\n      modalClose.forEach((button) => button.addEventListener(\"click\", closeModal));\n      tabs.forEach((tab) => tab.addEventListener(\"click\", () => setActiveTab(tab.dataset.tab)));\n      form?.addEventListener(\"submit\", submitSling);\n      window.addEventListener(\"keydown\", (event) => {\n        if (event.key === \"Escape\") {\n          closeModal();\n        }\n      });\n\n      const formatTimestamp = (element) => {\n        if (!element) {\n          return;\n        }\n        const iso = element.dataset.timestamp;\n        if (!iso) {\n          return;\n        }\n        const date = new Date(iso);\n        if (Number.isNaN(date.getTime())) {\n          return;\n        }\n        const parts = new Intl.DateTimeFormat(undefined, {\n          year: \"numeric\",\n          month: \"2-digit\",\n          day: \"2-digit\",\n          hour: \"2-digit\",\n          minute: \"2-digit\",\n          timeZoneName: \"short\",\n        }).formatToParts(date);\n        const lookup = (type) => parts.find((part) => part.type === type)?.value || \"\";\n        const timestamp =\n          lookup(\"year\") +\n          \"-\" +\n          lookup(\"month\") +\n          \"-\" +\n          lookup(\"day\") +\n          \" \" +\n          lookup(\"hour\") +\n          \":\" +\n          lookup(\"minute\") +\n          \" \" +\n          lookup(\"timeZoneName\");\n        element.textContent = timestamp.trim();\n      };\n\n      const formatTimestamps = (scope) => {\n        const targets = (scope || document).querySelectorAll(\".sling-meta[data-timestamp]\");\n        targets.forEach((target) => formatTimestamp(target));\n      };\n\n      formatTimestamps(document);\n\n      ws.addEventListener(\"message\", (event) => {\n        const html = event.data;\n\n        document.dispatchEvent(\n          new CustomEvent(\"datastar-fetch\", {\n            detail: {\n              type: \"datastar-patch-elements\",\n              argsRaw: {\n                selector: \"#slings\",\n                mode: \"prepend\",\n                elements: html,\n              },\n            },\n          }),\n        );\n\n        trimSlings();\n\n        const firstSling = slings.firstElementChild;\n        if (firstSling) {\n          formatTimestamps(firstSling);\n          firstSling.classList.add(\"sling--focus\");\n          firstSling.focus({ preventScroll: true });\n          window.setTimeout(() => firstSling.classList.remove(\"sling--focus\"), 2000);\n        }\n\n        if (!isGridMode && !isUserScrolling && firstSling) {\n          firstSling.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n        }\n      });\n    });\n  </script></body></html>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
